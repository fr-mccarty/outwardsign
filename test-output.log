
> test:with-temp-user
> node scripts/run-tests-with-temp-user.js

[dotenv@17.2.3] injecting env (6) from .env.local -- tip: üîë add access controls to secrets: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (9) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops
üì¶ Setting up test environment...

[dotenv@17.2.3] injecting env (0) from .env.local -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }
üöÄ Starting test user setup...

1Ô∏è‚É£  Checking if user test-staff-1762691268@outwardsign.test exists...
   User may already exist, looking up...
   ‚úÖ Found existing user with ID: 956bbe7c-71f9-4cf6-a256-c0784518ed5d

2Ô∏è‚É£  Checking if test parish exists...
   ‚úÖ Parish already exists with ID: de847f6f-727f-4517-bb26-5a5a0e364676

3Ô∏è‚É£  Linking user to parish with staff role...
   ‚úÖ Updated existing parish user link with staff role

4Ô∏è‚É£  Setting up user settings...
   ‚úÖ Updated user settings

‚ú® Test user setup complete!

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üìß Email: test-staff-1762691268@outwardsign.test
üîë Password: TestPassword123!
üèõÔ∏è  Parish: Playwright Test Parish 1762691268
üë§ User ID: 956bbe7c-71f9-4cf6-a256-c0784518ed5d
üÜî Parish ID: de847f6f-727f-4517-bb26-5a5a0e364676
üëî Role: staff
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

‚úÖ You can now run Playwright tests!
   npx playwright test



üé≠ Running Playwright tests...

[dotenv@17.2.3] injecting env (0) from .env.local -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops

Running 14 tests using 5 workers

[1A[2K[dotenv@17.2.3] injecting env (0) from .env.local -- tip: üîë add access controls to secrets: https://dotenvx.com/ops

[1A[2K[1/14] [setup] ‚Ä∫ tests/auth.setup.ts:7:6 ‚Ä∫ authenticate as staff user
[1A[2K[setup] ‚Ä∫ tests/auth.setup.ts:7:6 ‚Ä∫ authenticate as staff user
Authenticating as test-staff-1762691268@outwardsign.test...

[1A[2KSuccessfully authenticated and on dashboard

[1A[2KAuth state saved to /Users/joshmccarty/Code-2025Macbook/outwardsign/playwright/.auth/staff.json

[1A[2K[dotenv@17.2.3] injecting env (0) from .env.local -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

[1A[2K[2/14] [chromium] ‚Ä∫ tests/presentation.spec.ts:227:7 ‚Ä∫ Presentation Module ‚Ä∫ should export presentation to PDF and Word
[1A[2K[dotenv@17.2.3] injecting env (0) from .env.local -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }

[1A[2K[dotenv@17.2.3] injecting env (0) from .env.local -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

[1A[2K[dotenv@17.2.3] injecting env (0) from .env.local -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }

[1A[2K[3/14] [chromium] ‚Ä∫ tests/presentation.spec.ts:201:7 ‚Ä∫ Presentation Module ‚Ä∫ should show empty state when no presentations exist
[1A[2K[4/14] [chromium] ‚Ä∫ tests/presentation.spec.ts:4:7 ‚Ä∫ Presentation Module ‚Ä∫ should create presentation with child, add event, select template, then add father and verify all data
[1A[2K[dotenv@17.2.3] injecting env (0) from .env.local -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

[1A[2K[5/14] [chromium] ‚Ä∫ tests/presentation.spec.ts:267:7 ‚Ä∫ Presentation Module ‚Ä∫ should navigate through breadcrumbs
[1A[2K[6/14] [chromium] ‚Ä∫ tests/presentation.spec.ts:213:7 ‚Ä∫ Presentation Module ‚Ä∫ should validate required fields on create
[1A[2K[7/14] [chromium] ‚Ä∫ tests/readings.spec.ts:33:7 ‚Ä∫ Readings Module ‚Ä∫ should create, view, edit, and delete a reading
[1A[2K  1) [chromium] ‚Ä∫ tests/presentation.spec.ts:201:7 ‚Ä∫ Presentation Module ‚Ä∫ should show empty state when no presentations exist 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('text=/No presentations yet/i')
    Expected: visible
    Timeout: 5000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 5000ms[22m
    [2m  - waiting for locator('text=/No presentations yet/i')[22m


      204 |
      205 |     // Should show empty state
    > 206 |     await expect(page.locator('text=/No presentations yet/i')).toBeVisible();
          |                                                                ^
      207 |
      208 |     // Should have a create button in empty state
      209 |     const createButton = page.getByRole('link', { name: /New Presentation/i }).first();
        at /Users/joshmccarty/Code-2025Macbook/outwardsign/tests/presentation.spec.ts:206:64

    Error Context: test-results/presentation-Presentation--0aa78-when-no-presentations-exist-chromium/error-context.md


[1A[2K[dotenv@17.2.3] injecting env (0) from .env.local -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`

[1A[2K[8/14] [chromium] ‚Ä∫ tests/readings.spec.ts:128:7 ‚Ä∫ Readings Module ‚Ä∫ should filter readings by search, language, and category
[1A[2K  2) [chromium] ‚Ä∫ tests/readings.spec.ts:33:7 ‚Ä∫ Readings Module ‚Ä∫ should create, view, edit, and delete a reading 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('text=Create Reading')
    Expected: visible
    Error: strict mode violation: locator('text=Create Reading') resolved to 3 elements:
        1) <span role="link" aria-current="page" aria-disabled="true" data-slot="breadcrumb-page" class="text-foreground font-normal">Create Reading</span> aka getByRole('link', { name: 'Create Reading' })
        2) <h1 class="text-3xl font-bold">Create Reading</h1> aka getByRole('heading', { name: 'Create Reading' })
        3) <button type="submit" data-slot="button" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary tex‚Ä¶>‚Ä¶</button> aka getByRole('button', { name: 'Create Reading' })

    Call log:
    [2m  - Expect "toBeVisible" with timeout 5000ms[22m
    [2m  - waiting for locator('text=Create Reading')[22m


      46 |     // Verify we're on the create page
      47 |     await expect(page).toHaveURL('/readings/create', { timeout: 10000 });
    > 48 |     await expect(page.locator('text=Create Reading')).toBeVisible();
         |                                                       ^
      49 |
      50 |     // Fill in the reading form
      51 |     const testPericope = 'John 3:16-17';
        at /Users/joshmccarty/Code-2025Macbook/outwardsign/tests/readings.spec.ts:48:55

    Error Context: test-results/readings-Readings-Module-s-4c012-w-edit-and-delete-a-reading-chromium/error-context.md


[1A[2K[dotenv@17.2.3] injecting env (0) from .env.local -- tip: ‚öôÔ∏è  override existing env vars with { override: true }

[1A[2K[9/14] [chromium] ‚Ä∫ tests/readings.spec.ts:182:7 ‚Ä∫ Readings Module ‚Ä∫ should show empty state when no readings exist
[1A[2K  3) [chromium] ‚Ä∫ tests/readings.spec.ts:128:7 ‚Ä∫ Readings Module ‚Ä∫ should filter readings by search, language, and category 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('text=Matthew 5:1-12')
    Expected: visible
    Error: strict mode violation: locator('text=Matthew 5:1-12') resolved to 3 elements:
        1) <div data-slot="card-title" class="font-semibold text-lg line-clamp-1">Matthew 5:1-12</div> aka getByText('Matthew 5:1-12', { exact: true })
        2) <div data-slot="card-title" class="font-semibold text-lg line-clamp-1">Matthew 5:1-12a</div> aka getByText('Matthew 5:1-12a').first()
        3) <div data-slot="card-title" class="font-semibold text-lg line-clamp-1">Matthew 5:1-12a</div> aka getByText('Matthew 5:1-12a').nth(1)

    Call log:
    [2m  - Expect "toBeVisible" with timeout 5000ms[22m
    [2m  - waiting for locator('text=Matthew 5:1-12')[22m


      160 |
      161 |     // Verify both readings are visible
    > 162 |     await expect(page.locator('text=Matthew 5:1-12')).toBeVisible();
          |                                                       ^
      163 |     await expect(page.locator('text=Lucas 1:26-38')).toBeVisible();
      164 |
      165 |     // Test search filter
        at /Users/joshmccarty/Code-2025Macbook/outwardsign/tests/readings.spec.ts:162:55

    Error Context: test-results/readings-Readings-Module-s-d3bdf-earch-language-and-category-chromium/error-context.md


[1A[2K[dotenv@17.2.3] injecting env (0) from .env.local -- tip: üîê encrypt with Dotenvx: https://dotenvx.com

[1A[2K[10/14] [chromium] ‚Ä∫ tests/readings.spec.ts:198:7 ‚Ä∫ Readings Module ‚Ä∫ should validate required fields on create
[1A[2K  4) [chromium] ‚Ä∫ tests/readings.spec.ts:182:7 ‚Ä∫ Readings Module ‚Ä∫ should show empty state when no readings exist 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('text=/No readings yet/i')
    Expected: visible
    Timeout: 5000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 5000ms[22m
    [2m  - waiting for locator('text=/No readings yet/i')[22m


      188 |
      189 |     // Should show empty state
    > 190 |     await expect(page.locator('text=/No readings yet/i')).toBeVisible();
          |                                                           ^
      191 |     await expect(page.locator('p:has-text("Create your first reading")')).toBeVisible();
      192 |
      193 |     // Should have a create button in empty state
        at /Users/joshmccarty/Code-2025Macbook/outwardsign/tests/readings.spec.ts:190:59

    Error Context: test-results/readings-Readings-Module-s-c73c4-tate-when-no-readings-exist-chromium/error-context.md


[1A[2K[dotenv@17.2.3] injecting env (0) from .env.local -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops

[1A[2K[11/14] [chromium] ‚Ä∫ tests/readings.spec.ts:219:7 ‚Ä∫ Readings Module ‚Ä∫ should navigate through breadcrumbs
[1A[2K[12/14] [chromium] ‚Ä∫ tests/signup.spec.ts:4:7 ‚Ä∫ Signup Flow ‚Ä∫ should sign up a new user and redirect to onboarding
[1A[2K[13/14] [chromium] ‚Ä∫ tests/signup.spec.ts:61:7 ‚Ä∫ Signup Flow ‚Ä∫ should show error for invalid credentials
[1A[2K  5) [chromium] ‚Ä∫ tests/presentation.spec.ts:267:7 ‚Ä∫ Presentation Module ‚Ä∫ should navigate through breadcrumbs 

    [31mTest timeout of 30000ms exceeded.[39m

    Error: page.click: Test timeout of 30000ms exceeded.
    Call log:
    [2m  - waiting for locator('button:has-text("Add New Person")')[22m


      272 |     await page.click('button:has-text("Select Child")');
      273 |     await page.waitForSelector('[role="dialog"]', { timeout: 5000 });
    > 274 |     await page.click('button:has-text("Add New Person")');
          |                ^
      275 |     await page.fill('input#first_name', 'Breadcrumb');
      276 |     await page.fill('input#last_name', 'TestChild');
      277 |
        at /Users/joshmccarty/Code-2025Macbook/outwardsign/tests/presentation.spec.ts:274:16

    Error Context: test-results/presentation-Presentation--68ff4-avigate-through-breadcrumbs-chromium/error-context.md


[1A[2K  6) [chromium] ‚Ä∫ tests/presentation.spec.ts:4:7 ‚Ä∫ Presentation Module ‚Ä∫ should create presentation with child, add event, select template, then add father and verify all data 

    [31mTest timeout of 30000ms exceeded.[39m

    Error: page.click: Test timeout of 30000ms exceeded.
    Call log:
    [2m  - waiting for locator('button:has-text("Add New Person")')[22m


      28 |     // But for the child, we need to add a new person
      29 |     // Look for "Add New Person" button in the dialog
    > 30 |     await page.click('button:has-text("Add New Person")');
         |                ^
      31 |
      32 |     // Fill in the new person form
      33 |     await page.fill('input#first_name', childFirstName);
        at /Users/joshmccarty/Code-2025Macbook/outwardsign/tests/presentation.spec.ts:30:16

    Error Context: test-results/presentation-Presentation--963ba--father-and-verify-all-data-chromium/error-context.md


[1A[2K  7) [chromium] ‚Ä∫ tests/presentation.spec.ts:227:7 ‚Ä∫ Presentation Module ‚Ä∫ should export presentation to PDF and Word 

    [31mTest timeout of 30000ms exceeded.[39m

    Error: page.click: Test timeout of 30000ms exceeded.
    Call log:
    [2m  - waiting for locator('button:has-text("Add New Person")')[22m


      236 |     await page.click('button:has-text("Select Child")');
      237 |     await page.waitForSelector('[role="dialog"]', { timeout: 5000 });
    > 238 |     await page.click('button:has-text("Add New Person")');
          |                ^
      239 |     await page.fill('input#first_name', childFirstName);
      240 |     await page.fill('input#last_name', childLastName);
      241 |
        at /Users/joshmccarty/Code-2025Macbook/outwardsign/tests/presentation.spec.ts:238:16

    Error Context: test-results/presentation-Presentation--6b9b8-resentation-to-PDF-and-Word-chromium/error-context.md


[1A[2K[dotenv@17.2.3] injecting env (0) from .env.local -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

[1A[2K[14/14] [chromium] ‚Ä∫ tests/signup.spec.ts:75:7 ‚Ä∫ Signup Flow ‚Ä∫ should navigate from home to signup
[1A[2K  8) [chromium] ‚Ä∫ tests/signup.spec.ts:4:7 ‚Ä∫ Signup Flow ‚Ä∫ should sign up a new user and redirect to onboarding 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: locator('text=/Creating sample readings/i')
    Expected: visible
    Timeout: 5000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 5000ms[22m
    [2m  - waiting for locator('text=/Creating sample readings/i')[22m


      42 |     // Wait for preparing screen
      43 |     await expect(page.locator('text=/One minute while we get your parish ready for you/i')).toBeVisible({ timeout: 5000 });
    > 44 |     await expect(page.locator('text=/Creating sample readings/i')).toBeVisible();
         |                                                                    ^
      45 |
      46 |     // Should redirect to dashboard after creating parish and populating data
      47 |     await page.waitForURL('/dashboard', { timeout: 15000 });
        at /Users/joshmccarty/Code-2025Macbook/outwardsign/tests/signup.spec.ts:44:68

    Error Context: test-results/signup-Signup-Flow-should--a2b7a--and-redirect-to-onboarding-chromium/error-context.md


[1A[2K  8 failed
    [chromium] ‚Ä∫ tests/presentation.spec.ts:4:7 ‚Ä∫ Presentation Module ‚Ä∫ should create presentation with child, add event, select template, then add father and verify all data 
    [chromium] ‚Ä∫ tests/presentation.spec.ts:201:7 ‚Ä∫ Presentation Module ‚Ä∫ should show empty state when no presentations exist 
    [chromium] ‚Ä∫ tests/presentation.spec.ts:227:7 ‚Ä∫ Presentation Module ‚Ä∫ should export presentation to PDF and Word 
    [chromium] ‚Ä∫ tests/presentation.spec.ts:267:7 ‚Ä∫ Presentation Module ‚Ä∫ should navigate through breadcrumbs 
    [chromium] ‚Ä∫ tests/readings.spec.ts:33:7 ‚Ä∫ Readings Module ‚Ä∫ should create, view, edit, and delete a reading 
    [chromium] ‚Ä∫ tests/readings.spec.ts:128:7 ‚Ä∫ Readings Module ‚Ä∫ should filter readings by search, language, and category 
    [chromium] ‚Ä∫ tests/readings.spec.ts:182:7 ‚Ä∫ Readings Module ‚Ä∫ should show empty state when no readings exist 
    [chromium] ‚Ä∫ tests/signup.spec.ts:4:7 ‚Ä∫ Signup Flow ‚Ä∫ should sign up a new user and redirect to onboarding 
  6 passed (36.6s)

[36m  Serving HTML report at http://localhost:9323. Press Ctrl+C to quit.[39m
